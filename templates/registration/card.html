{% extends 'base/base_user.html' %}

{% load widget_tweaks %}

{% block content %}

  <style>
  @charset "US-ASCII";
  @import "http://fonts.googleapis.com/css?family=Lato:300,400,700";
  * {
    color: #444;
    font-family: Lato;
    font-size: 16px;
    font-weight: 300;
  }
  ::-webkit-input-placeholder {
    font-style: italic;
  }
  :-moz-placeholder {
    font-style: italic;
  }
  ::-moz-placeholder {
    font-style: italic;
  }
  :-ms-input-placeholder {
    font-style: italic;
  }

  body {
    float: left;
    margin: 0;
    padding: 0;
    width: 100%;
  }
  strong {
    font-weight: 700;
  }
  a {
    cursor: pointer;
    display: block;
    text-decoration: none;
  }
  a.button {
    border-radius: 5px 5px 5px 5px;
    -webkit-border-radius: 5px 5px 5px 5px;
    -moz-border-radius: 5px 5px 5px 5px;
    text-align: center;
    font-size: 21px;
    font-weight: 400;
    padding: 12px 0;
    width: 100%;
    display: table;
    background: #E51F04;
    background: -moz-linear-gradient(top,  #E51F04 0%, #A60000 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#E51F04), color-stop(100%,#A60000));
    background: -webkit-linear-gradient(top,  #E51F04 0%,#A60000 100%);
    background: -o-linear-gradient(top,  #E51F04 0%,#A60000 100%);
    background: -ms-linear-gradient(top,  #E51F04 0%,#A60000 100%);
    background: linear-gradient(top,  #E51F04 0%,#A60000 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#E51F04', endColorstr='#A60000',GradientType=0 );
  }
  a.button i {
    margin-right: 10px;
  }
  a.button.disabled {
    background: none repeat scroll 0 0 #ccc;
    cursor: default;
  }
  label {
    color: black;
  }
  .bkng-tb-cntnt {
    margin-top: 8%;
    margin-left: 17%;
  }
  .bkng-tb-cntnt {
    float: left;
    width: 800px;
  }
  .bkng-tb-cntnt a.button {
    color: #fff;
    float: right;
    font-size: 18px;
    padding: 5px 20px;
    width: auto;
  }
  .bkng-tb-cntnt a.button.o {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0);
    color: #e51f04;
    border: 1px solid #e51f04;
  }
  .bkng-tb-cntnt a.button i {
    color: #fff;
  }
  .bkng-tb-cntnt a.button.o i {
    color: #e51f04;
  }
  .bkng-tb-cntnt a.button.right i {
    float: right;
    margin: 2px 0 0 10px;
  }
  .bkng-tb-cntnt a.button.left {
    float: left;
  }
  .bkng-tb-cntnt a.button.disabled.o {
    border-color: #ccc;
    color: #ccc;
  }
  .bkng-tb-cntnt a.button.disabled.o i {
    color: #ccc;
  }
  .pymnts {
    float: left;
    width: 800px;
  }
  .pymnts * {
    float: left;
  }

  .sctn-row {
    margin-bottom: 35px;
    width: 800px;
  }
  .sctn-col {
    width: 375px;
  }
  .sctn-col.l {
    width: 425px;
  }
  .sctn-col input {
    border: 1px solid #ccc;
    font-size: 18px;
    line-height: 24px;
    padding: 10px 12px;
    width: 333px;
  }
  .sctn-col label {
    font-size: 24px;
    line-height: 24px;
    margin-bottom: 10px;
    width: 100%;
  }
  .sctn-col.x3 {
    width: 300px;
  }
  .sctn-col.x3.last {
    width: 200px;
  }
  .sctn-col.x3 input {
    width: 210px;
  }
  .sctn-col.x3 a {
    float: right;
  }
  .pymnts-sctn {
    width: 800px;
  }
  .pymnt-itm {
    margin: 0 0 3px;
    width: 800px;
  }
  .pymnt-itm h2 {
    background-color: #e9e9e9;
    font-size: 24px;
    line-height: 24px;
    margin: 0;
    padding: 28px 0 28px 20px;
    width: 800px;
  }
  .pymnt-itm.active h2 {
    background-color: #77C3C0;
    color: #fff;
    cursor: default;
  }
  .pymnt-itm div.pymnt-cntnt {
    display: none;
  }
  .pymnt-itm.active div.pymnt-cntnt {
    background-color: #f7f7f7;
    display: block;
    padding: 0 0 30px;
    width: 100%;
  }

  .pymnt-cntnt div.sctn-row {
    margin: 20px 30px 0;
    width: 740px;
  }
  .pymnt-cntnt div.sctn-row div.sctn-col {
    width: 345px;
  }
  .pymnt-cntnt div.sctn-row div.sctn-col.l {
    width: 395px;
  }
  .pymnt-cntnt div.sctn-row div.sctn-col input {
    width: 303px;
  }
  .pymnt-cntnt div.sctn-row div.sctn-col.half {
    width: 155px;
  }
  .pymnt-cntnt div.sctn-row div.sctn-col.half.l {
    float: left;
    width: 190px;
  }
  .pymnt-cntnt div.sctn-row div.sctn-col.half input {
    width: 113px;
  }
  .pymnt-cntnt div.sctn-row div.sctn-col.cvv {
    background-image: url("../../../static/images/cvv.png");
    background-position: 156px center;
    background-repeat: no-repeat;
    padding-bottom: 30px;
  }
  .pymnt-cntnt div.sctn-row div.sctn-col.cvv div.sctn-col.half input {
    width: 110px;
  }
  .openpay {
    float: right;
    height: 60px;
    margin: 10px 30px 0 0;
    width: 435px;
  }
  .openpay div.logop {
    background-image: url("../../../static/images/openpay.png");
    background-position: left bottom;
    background-repeat: no-repeat;
    border-right: 1px solid #ccc;
    font-size: 12px;
    font-weight: 400;
    height: 45px;
  /*   padding: 15px 20px 0 0; */
  }
  .openpay div.shield {
    background-image: url("../../../static/images/security.png");
    background-position: left bottom;
    background-repeat: no-repeat;
    font-size: 12px;
    font-weight: 400;
    margin-left: 20px;
    padding: 3px 0 0 40px;
    width: 200px;
  }
  .card-expl {
    float: left;
    height: 80px;
    margin: 20px 0;
    width: 800px;
  }
  .card-expl div {
    background-position: left 45px;
    background-repeat: no-repeat;
    height: 70px;
    padding-top: 10px;
  }
  .card-expl div.debit {
    background-image: url("../../../static/images/cards2.png");
    margin-left: 20px;
    width: 540px;
  }
  .card-expl div.credit {
    background-image: url("../../../static/images/cards1.png");
    border-right: 1px solid #ccc;
    margin-left: 30px;
    width: 209px;
  }
  .card-expl h4 {
    font-weight: 400;
    margin: 0;
  }
  </style>
</head>
<body>
  <div class="bkng-tb-cntnt">
    <div class="row">
      <div class="col-md-12">
        {% if messages %}
                    {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} ">
                        {{ message|safe }}
                    </div>
                    {% endfor %}"
        {% endif %}
      </div>
    </div>
    <h2>Ingresa tus datos para empezar a usar !GusYa¡</h2>
    <div class="pymnts">
      <form action="" method="POST" id="card-form">
        {% csrf_token %}

        <div class="pymnt-itm card active">
          <span class="card-errors"></span>
          <h2>Tarjeta de crédito o débito</h2>
          <div class="pymnt-cntnt">
            <div class="card-expl">
              <div class="credit"><h4>Tarjetas de crédito</h4></div>
              <div class="debit"><h4>Tarjetas de débito</h4></div>
            </div>


            <div class="sctn-row">

                <div class="sctn-col l">
                  <label>Nombre</label><input type="text" name="name" placeholder="Nombre" autocomplete="off">
                </div>
                <div class="sctn-col">
                  <label>Apellido</label><input type="text" name="last_name" autocomplete="off"></div>
                </div>

                <div class="sctn-row">
                  <div class="sctn-col l">
                    <label>Número telefonico</label><input type="number" name="phone_number" placeholder="55-5555-5555" autocomplete="off">
                  </div>
                  <br>

              <div class="sctn-col l">
                <br>
                <label>Nombre del tarjetahabiente</label><input type="text" placeholder="Nombre del tarjetahabiente" size="20" autocomplete="off" data-conekta="card[name]">
              </div>
              <div class="sctn-col">
                <br>
                <label>Número de tarjeta</label><input type="text" autocomplete="off" size="20" data-conekta="card[number]"></div>
              </div>
              <div class="sctn-row">
                <div class="sctn-col l">
                  <label>Fecha de expiración</label>
                  <div class="sctn-col half l"><input type="text" placeholder="Mes" data-conekta="card[exp_month]"></div>
                  <div class="sctn-col half l"><input type="text" placeholder="Año" data-conekta="card[exp_year]"></div>
                </div>
                <div class="sctn-col cvv"><label>Código de seguridad</label>
                    <div class="sctn-col half l"><input type="text" placeholder="3 dígitos" autocomplete="off" size="4" data-conekta="card[cvc]"></div>
                </div>
              </div>
              <div class="openpay"><div class="logop">Transacciones realizadas vía:</div>
              <div class="shield">Tus pagos se realizan de forma segura con encriptación de 256 bits</div>
            </div>
            <div class="sctn-row">
                <button class="btn btn-success"  type="submit">Suscribirse ahora!</button>
            </div>
          </div>
        </div>
      </form>
    </div>
</div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript" src="https://conektaapi.s3.amazonaws.com/v0.3.2/js/conekta.js"></script>
<script type="text/javascript">
    // Conekta Public Key
    Conekta.setPublishableKey('key_HaiUGVjycdHrDy2xqHzsvCg');
    // ...
    jQuery(function($) {
        $("#card-form").submit(function(event) {
            var $form;
            $form = $(this);

            /* Previene hacer submit más de una vez */
            $form.find("button").prop("disabled", true);
            Conekta.token.create($form, conektaSuccessResponseHandler, conektaErrorResponseHandler);

            /* Previene que la información de la forma sea enviada al servidor */
            return false;
        });
        });

    var conektaSuccessResponseHandler;
    conektaSuccessResponseHandler = function(token) {
          var $form;
            $form = $("#card-form");

              
            /* Inserta el token_id en la forma para que se envíe al servidor */

              $form.append($("<input type=\"hidden\" name=\"conektaTokenId\" />").val(token.id));

                
              /* and submit */

                $form.get(0).submit();
    };

    var conektaErrorResponseHandler;
    conektaErrorResponseHandler = function(response) {
          var $form;
          $form = $("#card-form");

              
          /* Muestra los errores en la forma */

          $form.find(".card-errors").text(response.message);
          $form.find("button").prop("disabled", false);
    };
    
</script>

  {% endblock %}
